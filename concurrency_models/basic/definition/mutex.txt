1. What is Mutex?
-> Mutex কথাটি এসেছে Mutual Exclusion (পারস্পরিক বর্জন) থেকে। এটি একটি Synchronization Primitive বা কন্ট্রোল মেকানিজম।
সহজ কথায় এটি একটি বিশেষ "সিগন্যাল" বা "অবজেক্ট" যা নিশ্চিত করে যে, একটি নির্দিষ্ট সময়ে কেবল একটি মাত্র থ্রেড বা প্রসেস কোনো share
করা Resource (Shared Resource, যেমন: গ্লোবাল ভ্যারিয়েবল বা ফাইল) ব্যবহার করতে পারবে।


-> Mutex-এর কাজের step মূলত ৩টি ধাপে বিভক্ত:
1. Lock (লক করা): কোনো thread যখন কোনো data use করতে চায়, সে প্রথমে Mutex-টিকে "lock" করার অনুরোধ জানায়। যদি lock টি
খালি থাকে, সে সেটি দখল করে নেয়।

2. Critical Section (কাজ করা): lock টি সফলভাবে পাওয়ার পর thread টি তার কাজ শুরু করে। এই সময় অন্য কোনো থ্রেড সেখানে ঢুকতে
পারে না।

3. Unlock (লক খোলা): কাজ শেষ হলে ঐ একই thread lock টি খুলে দেয়।


-> Mutex-এর সবচেয়ে বড় বৈশিষ্ট্য হলো এর Ownership
যে thread resource Lock করবে, কেবল সেই thread-ই lock টি খুলতে (Unlock) পারবে। অন্য কোনো thread এসে জোর করে বা
ভুল করে এই lock টি খুলতে পারে না। এটিই Mutex-কে অন্যান্য লকিং মেকানিজম (যেমন: Semaphore) থেকে আলাদা এবং নিরাপদ করে তোলে।


-> The Problem
ধরুন, একটি ব্যাংকের ডেটাবেসে আপনার অ্যাকাউন্টে ১০০ টাকা আছে। একই সময়ে দুইজন মানুষ আপনার অ্যাকাউন্টে টাকা জমা দিচ্ছে।

- থ্রেড ১: ব্যালেন্স (১০০) চেক করে তাতে ৫০ টাকা যোগ করতে চায়।
- থ্রেড ২: ব্যালেন্স (১০০) চেক করে তাতে ৩০ টাকা যোগ করতে চায়।

যদি Mutex না থাকে, তবে দুজনেই ব্যালেন্স দেখবে ১০০ টাকা। থ্রেড ১ টাকা যোগ করে বলবে নতুন ব্যালেন্স ১৫০, আর থ্রেড ২ টাকা যোগ করে
বলবে নতুন ব্যালেন্স ১৩০। শেষ পর্যন্ত আপনার ব্যালেন্স হয়ে যাবে ১৩০ টাকা (৫০ টাকা হারিয়ে যাবে!)। একে বলা হয় Race Condition।

Mutex এই সমস্যা সমাধান করে, এর কাজের ধাপগুলো হলো:
১. Lock করার চেষ্টা (Acquire): একটি থ্রেড যখন কোনো ডেটা (যেমন: ব্যাংক ব্যালেন্স) পরিবর্তন করতে চায়, সে প্রথমে Mutex-এর কাছে
গিয়ে বলে, "আমি এই ডেটা ব্যবহার করতে চাই, আমাকে লকটি দাও।"

২. লকের মালিকানা পাওয়া (Lock Ownership): যদি লকটি আগে থেকে কেউ ব্যবহার না করে (অর্থাৎ Unlocked থাকে), তবে এই থ্রেডটি
লকের মালিক হয়ে যায় এবং সেটি লক করে দেয়।

৩. অন্যদের জন্য রাস্তা বন্ধ (Blocking): যতক্ষণ প্রথম থ্রেডটি লকটি ধরে রাখবে, অন্য কোনো থ্রেড সেখানে ঢুকতে পারবে না। তারা লাইনে
দাঁড়িয়ে অপেক্ষা (Wait) করবে। তারা নিজেরা এই লকটি খুলতে পারবে না।

৪. মালিক কর্তৃক Unlock করা (Release): কাজ শেষ হয়ে গেলে যে থ্রেডটি লক করেছিল, তাকেই লকটি খুলে দিতে হয়। লকটি খোলার সাথে
সাথে লাইনে থাকা পরের থ্রেডটি মালিকানা পাওয়ার সুযোগ পায়।

